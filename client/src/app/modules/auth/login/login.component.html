<div class="container">
  <ul class="nav nav-tabs justify-content-center">
    <li class="nav-item">
      <a
        class="nav-link"
        [ngClass]="{ active: activeTab === 'signin' }"
        (click)="setActiveTab('signin')"
        >Sign In</a
      >
    </li>
    <li class="nav-item">
      <a
        class="nav-link"
        [ngClass]="{ active: activeTab === 'signup' }"
        (click)="setActiveTab('signup')"
        >Sign Up</a
      >
    </li>
    <li class="nav-item">
      <a
        class="nav-link"
        [ngClass]="{ active: activeTab === 'recovery' }"
        (click)="setActiveTab('recovery')"
        >Password Recovery</a
      >
    </li>
  </ul>

  <div class="tab-content">
    <div class="tab-pane" [ngClass]="{ 'show active': activeTab === 'signin' }">
      <h2>Sign In</h2>
      <form [formGroup]="signInForm" (ngSubmit)="signIn()">
        <div class="mb-3">
          <label for="signinUsername" class="form-label">Username:</label>
          <input
            type="text"
            formControlName="signinUsername"
            id="signinUsername"
            class="form-control"
            required
          />
          <app-control-messages
            [control]="signInForm.controls.signinUsername"
          ></app-control-messages>
        </div>
        <div class="mb-3">
          <label for="signinPassword" class="form-label">Password:</label>
          <input
            type="password"
            formControlName="signinPassword"
            id="signinPassword"
            class="form-control"
            required
          />
          <app-control-messages
            [control]="signInForm.controls.signinPassword"
          ></app-control-messages>
        </div>
        <button type="submit" class="btn btn-primary" [disabled]="signInHasErrors()">Sign In</button>
      </form>
      <app-auth-event-messages [message]="authEventMessage"></app-auth-event-messages>
    </div>
    <div class="tab-pane" [ngClass]="{ 'show active': activeTab === 'signup' }">
      <h2>Sign Up</h2>
      <form [formGroup]="signUpForm" (ngSubmit)="signUp()">
        <div class="mb-3">
          <label for="signupUsername" class="form-label">Username:</label>
          <input
            type="text"
            formControlName="signupUsername"
            id="signupUsername"
            class="form-control"
            required
          />
          <app-control-messages
            [control]="signUpForm.controls.signupUsername"
          ></app-control-messages>
        </div>
        <div class="mb-3">
          <label for="signupPassword" class="form-label">Password:</label>
          <input
            type="password"
            formControlName="signupPassword"
            id="signupPassword"
            class="form-control"
            required
          />
          <app-control-messages
            [control]="signUpForm.controls.signupPassword"
          ></app-control-messages>
        </div>
        <div class="mb-3">
          <label for="signupEmail" class="form-label">Email:</label>
          <input
            type="email"
            formControlName="signupEmail"
            id="signupEmail"
            class="form-control"
            required
          />
          <app-control-messages
            [control]="signUpForm.controls.signupEmail"
          ></app-control-messages>
        </div>
        <button type="submit" class="btn btn-primary" [disabled]="signUpHasErrors()">Sign Up</button>
        <app-auth-event-messages [message]="authEventMessage"></app-auth-event-messages>
      </form>

      <h2 *ngIf="isSignedUp">Confirm Sign Up</h2>
      <form
        [formGroup]="signUpForm"
        *ngIf="isSignedUp"
        (ngSubmit)="confirmSignUp()"
      >
        <div class="mb-3">
          <label for="confirmUsername" class="form-label">Username:</label>
          <input
            type="text"
            formControlName="signupUsername"
            id="confirmUsername"
            class="form-control"
            required
          />
          <app-control-messages
            [control]="signUpForm.controls.signupUsername"
          ></app-control-messages>
        </div>
        <div class="mb-3">
          <label for="confirmCode" class="form-label">Confirmation Code:</label>
          <input
            type="text"
            formControlName="confirmSignUpCode"
            id="confirmCode"
            class="form-control"
            required
          />
          <app-control-messages
            [control]="signUpForm.controls.confirmSignUpCode"
          ></app-control-messages>
        </div>
        <button type="submit" class="btn btn-primary">Confirm Sign Up</button>
      </form>
    </div>
    <div
      class="tab-pane"
      [ngClass]="{ 'show active': activeTab === 'recovery' }"
    >
      <h2>Password Recovery</h2>
      <form [formGroup]="forgotPasswordForm" (ngSubmit)="forgotPassword()">
        <div class="mb-3">
          <label for="forgotPasswordUsername" class="form-label"
            >Username:</label
          >
          <input
            type="text"
            formControlName="forgotPasswordUsername"
            id="forgotPasswordUsername"
            class="form-control"
            required
          />
          <app-control-messages
            [control]="forgotPasswordForm.controls.forgotPasswordUsername"
          ></app-control-messages>
        </div>
        <button type="submit" class="btn btn-primary">Forgot Password</button>
      </form>

      <h2>Reset Password</h2>
      <form [formGroup]="resetPasswordForm" (ngSubmit)="resetPassword()">
        <div class="mb-3">
          <label for="resetPasswordUsername" class="form-label"
            >Username:</label
          >
          <input
            type="text"
            formControlName="resetPasswordUsername"
            id="resetPasswordUsername"
            class="form-control"
            required
          />
          <app-control-messages
            [control]="resetPasswordForm.controls.resetPasswordUsername"
          ></app-control-messages>
        </div>
        <div class="mb-3">
          <label for="resetPasswordCode" class="form-label"
            >Confirmation Code:</label
          >
          <input
            type="text"
            formControlName="resetPasswordCode"
            id="resetPasswordCode"
            class="form-control"
            required
          />
          <app-control-messages
            [control]="resetPasswordForm.controls.resetPasswordCode"
          ></app-control-messages>
        </div>
        <div class="mb-3">
          <label for="newPassword" class="form-label">New Password:</label>
          <input
            type="password"
            formControlName="newPassword"
            id="newPassword"
            class="form-control"
            required
          />
          <app-control-messages
            [control]="resetPasswordForm.controls.newPassword"
          ></app-control-messages>
        </div>
        <button type="submit" class="btn btn-primary" [disabled]="passwordRecoveryHasErrors()">Reset Password</button>
      </form>
      <app-auth-event-messages [message]="authEventMessage"></app-auth-event-messages>
    </div>
  </div>
</div>
